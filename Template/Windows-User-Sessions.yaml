zabbix_export:
  version: '6.0'
  date: '2023-02-27T11:04:37Z'
  groups:
    -
      uuid: 0d5e665adb7b4ea3a5f9298c1d1fc936
      name: Windows
    -
      uuid: 846977d1dfed4968bc5f8bdb363285bc
      name: 'Windows Server'
  templates:
    -
      uuid: 4bf35cff4a2642d5a8e1e7f91352075e
      template: Windows-User-Sessions
      name: Windows-User-Sessions
      description: |
        Template for module Get-Query
        GitHub: https://github.com/Lifailon/Get-Query
      groups:
        -
          name: Windows
        -
          name: 'Windows Server'
      items:
        -
          uuid: 08f82896ffa14c77958d9c585174bb46
          name: 'User active count'
          key: 'Get-Query-Param[ACTIVECOUNT]'
          history: 21d
          trends: '0'
          tags:
            -
              tag: PowerShell
              value: 'User Sessions'
          triggers:
            -
              uuid: fea83ae4e3334e52a5d390ad7c48410e
              expression: 'last(/Windows-User-Sessions/Get-Query-Param[ACTIVECOUNT])>{$ACTIVE}'
              name: 'Количество активных пользователей выше {$ACTIVE}'
              priority: WARNING
        -
          uuid: 59f51ecfbad24bc7968794b5c08c7c33
          name: 'Active users'
          key: 'Get-Query-Param[ACTIVEUSER]'
          history: 21d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: PowerShell
              value: 'User Sessions'
        -
          uuid: 861e169d220b4d62ae5ae07974ffe6b3
          name: 'User inactive count'
          key: 'Get-Query-Param[INACTIVECOUNT]'
          history: 21d
          trends: '0'
          tags:
            -
              tag: PowerShell
              value: 'User Sessions'
          triggers:
            -
              uuid: eca7e01eb64648279b0cb8a4ff5d0af8
              expression: 'last(/Windows-User-Sessions/Get-Query-Param[INACTIVECOUNT])>{$INACTIVE}'
              name: 'Количество неактивных пользователей выше {$INACTIVE}'
              priority: WARNING
              description: |
                last(/Windows-User-Sessions/Get-Query-Param[ACTIVECOUNT])
                {ITEM.LASTVALUE1}
        -
          uuid: 4fbabc3dd3884d37999e61704704d227
          name: 'Inactive users'
          key: 'Get-Query-Param[INACTIVEUSER]'
          history: 21d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: PowerShell
              value: 'User Sessions'
      macros:
        -
          macro: '{$ACTIVE}'
          value: '12'
          description: 'Максимальное кол-во активных пользователей'
        -
          macro: '{$INACTIVE}'
          value: '5'
          description: 'Максимальное кол-во неактивных пользователей'
  graphs:
    -
      uuid: 73545dc0cb364f22869b943f5099140e
      name: 'Active and inactive users'
      height: '400'
      yaxismax: '0'
      show_work_period: 'NO'
      show_triggers: 'NO'
      type: EXPLODED
      graph_items:
        -
          color: 199C0D
          calc_fnc: LAST
          item:
            host: Windows-User-Sessions
            key: 'Get-Query-Param[ACTIVECOUNT]'
        -
          sortorder: '1'
          color: F63100
          calc_fnc: LAST
          item:
            host: Windows-User-Sessions
            key: 'Get-Query-Param[INACTIVECOUNT]'
